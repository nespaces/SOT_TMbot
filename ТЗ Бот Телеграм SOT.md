\-----
# Техническое задание: Телеграм-бот для поиска тиммейтов в Sea of Thieves
## **1. Общая концепция**
Бот предназначен для **поиска тиммейтов и гильдий** в игре *Sea of Thieves*.
Пользователи создают **анкеты**, которые после **модерации** публикуются в канале объявлений.
Игроки могут **искать напарников по фильтрам**, а **администраторы** управляют системой.

-----
## **2. Функциональные требования**
### **2.1. Создание анкеты**
При создании объявления пользователь указывает:
### **📌 Тип поиска (первый шаг)**
- 🎮 **#игрок** *(ищет напарника, срок 3 дня)*
- ⚓ **#команда** *(ищет команду, срок 3 дня)*
- 🏴‍☠️ **#гильдия** *(ищет гильдию, срок 7 дней)*
### **📌 Основные поля анкеты**
- 🏷 **Никнейм** *(до 100 символов)*
- 🚻 **Пол** *(🧑 Мужской / 👩 Женский / 🤷 Не важно)*
- 🎂 **Возраст** *(число, 1–100)*
### **📌 Опыт в игре (часы)**
- 🐣 **Новичок** *(0–100 часов)*
- 🌱 **Начинающий** *(100–500 часов)*
- ⚓ **Опытный** *(500–2000 часов)*
- ⚔️ **Ветеран** *(2000–5000 часов)*
- 🏴‍☠️ **Капитан** *(5000–10000 часов)*
- 🌊 **Легенда морей** *(10 000+ часов)*
### **📌 Игровые параметры**
- ⚔️ **Роль на корабле** *(выбор)*:
  - 🏴‍☠️ Рулевой
  - 🦜 Мейн
  - 🛡 Саппорт
  - ⚓ Дека
  - 🏗 Универсал
- 🏴‍☠️ **Фракция** *(выбор)*:
  - 👻 Ордер душ
  - 📦 Торговый союз
  - 💰 Златодержцы
  - ☠️ Кости мертвеца
  - 🏆 Сокровища Афины
  - 🦈 Братство охотников
- 🌍 **Сервер** *(выбор)*:
  - 🇪🇺 Европа
  - 🇺🇸 Америка
  - 🇯🇵 Азия
- ⛵ **Тип корабля** *(выбор)*:
  - 🚤 Шлюп
  - ⛴ Бригантина
  - 🏴‍☠️ Галеон
- 🎮 **Платформа** *(выбор)*:
  - 💻 PC
  - 🎮 Xbox
  - 🎮 PlayStation
### **📌 Связь**
- 📡 **Telegram** *(автоматически @username)*
- 🎙 **Discord** *(пользователь вводит вручную)*
### **📌 Дополнительная информация *(до 500 символов)***
📌 **Навигация**

- **Для выбора полей** используется **Reply Markup Keyboard** *(сворачиваемая клавиатура)*.
- **В любой момент** можно отменить заполнение /cancel.
-----
## **2.2. Модерация и публикация**
После заполнения анкеты:

- ✅ Пользователь получает уведомление: **«Анкета отправлена на модерацию»**
- 📢 В **канале модерации** появляется сообщение с кнопками: 
  - ✅ **Принять** *(approve)*
  - ❌ **Отклонить** *(decline)*

📌 **Результат модерации:**

- **Принято**
  - Анкета удаляется из **канала модерации**.
  - Публикуется **в канале объявлений** (с реакциями).
  - Пользователь получает уведомление **со ссылкой на объявление**.
- **Отклонено**
  - Анкета **не публикуется**.
  - Пользователь получает сообщение с **причиной отказа**.
-----
## **2.3. Фильтрация и поиск анкет**
- 🔎 **Поиск анкет** по:
  - 🎮 Типу поиска (#игрок, #команда, #гильдия)
  - 🎂 Возрасту
  - ⏳ Опыту в игре
  - ⚔️ Роли на корабле
  - 🌍 Региону
  - 📡 Способу связи
- 🎯 **Рекомендации напарников**
  - /recommend предлагает **игроков с похожими параметрами**.
  - Можно **написать** пользователю **или принять приглашение**.

📌 **Реакции Telegram**

- Пользователи могут **оставлять реакции** (лайк, дизлайк, сердечко).
- **Аналитика** доступна **администраторам**.
-----
## **2.4. Административные команды**
🔧 **/admin** – панель администратора

- Включить / отключить **авто-модерацию**
- Посмотреть **статистику бота**
- Удалить анкету из канала объявлений

📌 **Запрос на удаление**

- Пользователь **не может сам удалить анкету**, но может **подать заявку**.
- **Админ** решает, **удалять или оставить**.
-----
## **3. Главное меню**
📌 **Навигация с Reply Markup Keyboard**

- Доступна **везде в боте**
- Позволяет **сворачивать / разворачивать** меню
### **Основные команды**
🎮 **Работа с объявлениями**

- /create – **создать** анкету
- /manage – **управление** объявлениями

🎭 **События и турниры**

- /events – **просмотр ивентов** *(админ может публиковать)*

📜 **Информация**

- /faq – **как заполнять анкету**
- /rules – **правила**
- /privacy – **конфиденциальность**

📢 **Поддержка и реклама**

- /promote – **контакты для рекламы**
- /donate – **пожертвования**
-----
## **4. Технические требования**
✅ **База данных** – **SQLite** (для автономности) и **PostgreSQL** (для масштабируемости)
✅ **Работа на Windows/Linux** – поддержка portalocker и fcntl
✅ **Хранение данных** – объявления **удаляются автоматически** по сроку

📌 **Переменные в config.py**

BOT\_TOKEN = "Токен\_Бота"

MODERATION\_ID = "ID\_Канала\_Модерации"

LISTINGS\_ID = "ID\_Канала\_Объявлений"

📌 **3 Telegram-канала**

1. **Бот** – для подачи анкет
1. **Канал объявлений** – публикация одобренных анкет
1. **Канал модерации** – для принятия/отклонения

📌 **Логирование ошибок**

- **Файл логов** для отладки
- Авто-оповещения админа о сбоях

📌 **Дополнительные функции (по желанию)**

- **AI-анализ анкет** для рекомендаций
- **Фильтрация нежелательного контента**
- **Обратная связь** от пользователей
-----
## **5. Итог**
Бот **полностью автоматизирует поиск тиммейтов в Sea of Thieves**.

✅ **Создание анкеты** (все необходимые поля, эмодзи, категории опыта)
✅ **Выбор типа поиска** (#игрок, #команда, #гильдия)
✅ **Модерация объявлений** (ручная/автоматическая, публикация в канале)
✅ **Фильтрация и поиск игроков** (/search, /recommend)
✅ **Реакции и отзывы** (реакции Telegram под объявлениями)
✅ **Автоматическое удаление анкет** (по сроку)
✅ **Раздел /admin** (управление модерацией, статистика, удаление анкет)
✅ **Система рекомендаций** (поиск напарников по параметрам)
✅ **Продвинутый функционал** (/events, /faq, /rules, /privacy)
✅ **Поддержка SQLite и PostgreSQL** (масштабируемость)
✅ **Защита от ошибок, оптимизация API Telegram**
✅ **Автоматическая модерация (опционально)**
✅ **AI-аналитика и рекомендации (необязательно)**
